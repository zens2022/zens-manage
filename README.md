# Zens Manage - è³‡ç”¢ç®¡ç†ç³»çµ±

ä¸€å€‹å…¨ç«¯è³‡ç”¢ç®¡ç†æ‡‰ç”¨ç¨‹å¼ï¼Œä½¿ç”¨ **Node.js (Koa)** å’Œ **React** æ§‹å»ºã€‚

## ğŸ“‹ ç›®éŒ„

- [å°ˆæ¡ˆæ¦‚è¿°](#å°ˆæ¡ˆæ¦‚è¿°)
- [åŠŸèƒ½ç‰¹è‰²](#åŠŸèƒ½ç‰¹è‰²)
- [æŠ€è¡“æ£§](#æŠ€è¡“æ£§)
- [å°ˆæ¡ˆçµæ§‹](#å°ˆæ¡ˆçµæ§‹)
- [ç’°å¢ƒéœ€æ±‚](#ç’°å¢ƒéœ€æ±‚)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [æ¸¬è©¦](#æ¸¬è©¦)
- [API æ–‡æª”](#api-æ–‡æª”)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)

## å°ˆæ¡ˆæ¦‚è¿°

Zens Manage æ˜¯ä¸€å€‹è³‡ç”¢ç®¡ç†ç³»çµ±ï¼Œå…è¨±ç”¨æˆ¶è¿½è¹¤å’Œç®¡ç†æ¯æœˆè³‡ç”¢è¨˜éŒ„ã€‚ç³»çµ±æ”¯æ´ç”¨æˆ¶ç®¡ç†ã€è³‡ç”¢è¨˜éŒ„çš„ CRUD æ“ä½œï¼Œä»¥åŠè³‡æ–™è¦–è¦ºåŒ–ã€‚

### ä¸»è¦åŠŸèƒ½

- ğŸ‘¤ **ç”¨æˆ¶ç®¡ç†**ï¼šç®¡ç†å“¡å¯ä»¥å‰µå»ºã€ç·¨è¼¯ã€å•Ÿç”¨/åœç”¨å’Œåˆªé™¤ç”¨æˆ¶
- ğŸ’° **è³‡ç”¢ç®¡ç†**ï¼šç”¨æˆ¶å¯ä»¥è¨˜éŒ„æ¯æœˆè³‡ç”¢æ˜ç´°
- ğŸ“Š **æ•¸æ“šè¦–è¦ºåŒ–**ï¼šä½¿ç”¨æŠ˜ç·šåœ–å±•ç¤ºè³‡ç”¢è¶¨å‹¢
- ğŸ” **æ¬Šé™æ§åˆ¶**ï¼šåŸºæ–¼ JWT çš„èº«ä»½é©—è­‰ï¼Œå€åˆ†ç®¡ç†å“¡å’Œæ™®é€šç”¨æˆ¶æ¬Šé™
- ğŸ” **æ•¸æ“šéæ¿¾**ï¼šç®¡ç†å“¡å¯æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ¶è³‡æ–™ï¼Œæ™®é€šç”¨æˆ¶åƒ…èƒ½æŸ¥çœ‹è‡ªå·±çš„è³‡æ–™

## åŠŸèƒ½ç‰¹è‰²

### ç”¨æˆ¶ç®¡ç†
- å‰µå»ºæ–°ç”¨æˆ¶ï¼ˆç®¡ç†å“¡æ¬Šé™ï¼‰
- ç·¨è¼¯ç”¨æˆ¶è³‡è¨Š
- å•Ÿç”¨/åœç”¨ç”¨æˆ¶ç‹€æ…‹
- åˆªé™¤ç”¨æˆ¶ï¼ˆéœ€å…ˆåœç”¨ï¼‰
- ç”¨æˆ¶æœå°‹åŠŸèƒ½

### è³‡ç”¢ç®¡ç†
- æ–°å¢æ¯æœˆè³‡ç”¢è¨˜éŒ„
- ç·¨è¼¯ç¾æœ‰è³‡ç”¢è¨˜éŒ„
- åˆªé™¤è³‡ç”¢è¨˜éŒ„
- è‡ªå‹•è¨ˆç®—è³‡ç”¢å°è¨ˆ
- æŒ‰ç”¨æˆ¶éæ¿¾è³‡ç”¢è³‡æ–™
- åˆ†é é¡¯ç¤ºè³‡ç”¢åˆ—è¡¨
- è³‡ç”¢è¶¨å‹¢åœ–è¡¨å±•ç¤º

## æŠ€è¡“æ£§

### Backend
- **æ¡†æ¶**: Koa.js
- **è³‡æ–™åº«**: SQLite + Sequelize ORM
- **èªè­‰**: JWT (JSON Web Tokens)
- **å¯†ç¢¼åŠ å¯†**: bcryptjs
- **æ¸¬è©¦**: Jest + Supertest
- **é–‹ç™¼å·¥å…·**: Nodemon

### Frontend
- **æ¡†æ¶**: React 19
- **å»ºç½®å·¥å…·**: Vite
- **UI æ¡†æ¶**: Material-UI (MUI)
- **åœ–è¡¨**: Recharts
- **è·¯ç”±**: React Router v7
- **æ¸¬è©¦**: Jest + React Testing Library
- **æ—¥æœŸè™•ç†**: Moment.js

## å°ˆæ¡ˆçµæ§‹

```
zens-manage/
â”œâ”€â”€ backend/                 # å¾Œç«¯ API æœå‹™
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ config/         # é…ç½®æ–‡ä»¶ï¼ˆè³‡æ–™åº«ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨å±¤
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é–“ä»¶ï¼ˆèªè­‰ã€éŒ¯èª¤è™•ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ models/         # Sequelize æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ repositories/   # è³‡æ–™å­˜å–å±¤
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±å®šç¾©
â”‚   â”‚   â”œâ”€â”€ services/       # æ¥­å‹™é‚è¼¯å±¤
â”‚   â”‚   â””â”€â”€ app.js          # æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ tests/              # æ¸¬è©¦æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ user.test.js    # ç”¨æˆ¶ API æ¸¬è©¦
â”‚   â”‚   â””â”€â”€ asset.test.js   # è³‡ç”¢ API æ¸¬è©¦
â”‚   â”œâ”€â”€ data/               # SQLite è³‡æ–™åº«æ–‡ä»¶
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/               # å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # å¯é‡ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é é¢çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/       # API æœå‹™
â”‚   â”‚   â”œâ”€â”€ tests/          # æ¸¬è©¦æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ App.jsx         # ä¸»æ‡‰ç”¨çµ„ä»¶
â”‚   â”‚   â””â”€â”€ main.jsx        # æ‡‰ç”¨å…¥å£
â”‚   â””â”€â”€ package.json
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ç’°å¢ƒéœ€æ±‚

- **Node.js**: v18.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **npm**: v9.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **ä½œæ¥­ç³»çµ±**: Windows / macOS / Linux

## å¿«é€Ÿé–‹å§‹

### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone <repository-url>
cd zens-manage
```

### 2. å¾Œç«¯è¨­ç½®

```bash
cd backend
npm install
npm run dev
```

å¾Œç«¯æœå‹™å°‡åœ¨ `http://localhost:3000` å•Ÿå‹•ã€‚

**é è¨­ç®¡ç†å“¡å¸³è™Ÿ**ï¼ˆé¦–æ¬¡å•Ÿå‹•è‡ªå‹•å‰µå»ºï¼‰ï¼š
- ç”¨æˆ¶åï¼š`admin`
- å¯†ç¢¼ï¼š`admin123`

### 3. å‰ç«¯è¨­ç½®

é–‹å•Ÿæ–°çš„çµ‚ç«¯è¦–çª—ï¼š

```bash
cd frontend
npm install
npm run dev
```

å‰ç«¯æ‡‰ç”¨å°‡åœ¨ `http://localhost:5173` å•Ÿå‹•ã€‚

### 4. è¨ªå•æ‡‰ç”¨

åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ `http://localhost:5173`ï¼Œä½¿ç”¨é è¨­ç®¡ç†å“¡å¸³è™Ÿç™»å…¥ã€‚

## æ¸¬è©¦

### å¾Œç«¯æ¸¬è©¦

```bash
cd backend
npm test
```

æ¸¬è©¦è¦†è“‹ï¼š
- âœ… ç”¨æˆ¶ APIï¼ˆç™»å…¥ã€å‰µå»ºã€æ›´æ–°ã€ç‹€æ…‹è®Šæ›´ã€åˆªé™¤ï¼‰
- âœ… è³‡ç”¢ APIï¼ˆå‰µå»ºã€åˆ—è¡¨ã€æ›´æ–°ã€åˆªé™¤ï¼‰
- âœ… èªè­‰ä¸­é–“ä»¶
- âœ… è³‡æ–™åº«æ“ä½œ

### å‰ç«¯æ¸¬è©¦

```bash
cd frontend
npm test
```

æ¸¬è©¦è¦†è“‹ï¼š
- âœ… Login çµ„ä»¶æ¸²æŸ“
- âœ… AssetPage æ•¸æ“šåŠ è¼‰
- âœ… UserManagement åŸºæœ¬åŠŸèƒ½

### æ¸¬è©¦è¦†è“‹ç‡

```bash
# å¾Œç«¯
cd backend
npm test -- --coverage

# å‰ç«¯
cd frontend
npm test -- --coverage
```

## API æ–‡æª”

### èªè­‰

æ‰€æœ‰ APIï¼ˆé™¤äº†ç™»å…¥ï¼‰éƒ½éœ€è¦åœ¨ Header ä¸­åŒ…å« JWT Tokenï¼š

```
Authorization: Bearer <token>
```

### ç”¨æˆ¶ API

| æ–¹æ³• | ç«¯é» | æè¿° | æ¬Šé™ |
|------|------|------|------|
| POST | `/api/user/login` | ç”¨æˆ¶ç™»å…¥ | å…¬é–‹ |
| GET | `/api/user/list` | ç²å–ç”¨æˆ¶åˆ—è¡¨ | éœ€èªè­‰ |
| POST | `/api/user/create` | å‰µå»ºæ–°ç”¨æˆ¶ | éœ€èªè­‰ |
| POST | `/api/user/update` | æ›´æ–°ç”¨æˆ¶è³‡è¨Š | éœ€èªè­‰ |
| POST | `/api/user/change-status` | è®Šæ›´ç”¨æˆ¶ç‹€æ…‹ | éœ€èªè­‰ |
| POST | `/api/user/delete` | åˆªé™¤ç”¨æˆ¶ | éœ€èªè­‰ |

### è³‡ç”¢ API

| æ–¹æ³• | ç«¯é» | æè¿° | æ¬Šé™ |
|------|------|------|------|
| GET | `/api/asset/list` | ç²å–è³‡ç”¢åˆ—è¡¨ | éœ€èªè­‰ |
| POST | `/api/asset/create` | å‰µå»ºè³‡ç”¢è¨˜éŒ„ | éœ€èªè­‰ |
| PUT | `/api/asset/:id` | æ›´æ–°è³‡ç”¢è¨˜éŒ„ | éœ€èªè­‰ |
| DELETE | `/api/asset/:id` | åˆªé™¤è³‡ç”¢è¨˜éŒ„ | éœ€èªè­‰ |
| GET | `/api/asset/last-items` | ç²å–æœ€å¾Œä¸€æ¬¡çš„è³‡ç”¢é …ç›® | éœ€èªè­‰ |

### API è«‹æ±‚ç¯„ä¾‹

#### ç™»å…¥

```bash
curl -X POST http://localhost:3000/api/user/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

#### å‰µå»ºè³‡ç”¢è¨˜éŒ„

```bash
curl -X POST http://localhost:3000/api/asset/create \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <your-token>" \
  -d '{
    "date": "2025-01-01",
    "items": [
      {"name": "è‚¡ç¥¨", "value": 100000},
      {"name": "ç¾é‡‘", "value": 50000}
    ]
  }'
```

## éƒ¨ç½²

### ç”Ÿç”¢ç’°å¢ƒå»ºç½®

#### å¾Œç«¯

```bash
cd backend
npm start
```

#### å‰ç«¯

```bash
cd frontend
npm run build
```

å»ºç½®å¾Œçš„æ–‡ä»¶å°‡åœ¨ `frontend/dist` ç›®éŒ„ä¸­ã€‚

### ç’°å¢ƒè®Šæ•¸

å‰µå»º `.env` æ–‡ä»¶ï¼ˆå¯é¸ï¼‰ï¼š

```env
# Backend
PORT=3000
JWT_SECRET=your-secret-key
NODE_ENV=production

# Frontend
VITE_API_URL=http://localhost:3000
```

### Docker éƒ¨ç½²ï¼ˆå¯é¸ï¼‰

å¦‚æœå°ˆæ¡ˆåŒ…å« Docker é…ç½®ï¼š

```bash
docker-compose up -d
```

## å¸¸è¦‹å•é¡Œ

### Q: é¦–æ¬¡å•Ÿå‹•å¾Œç«¯æ™‚è³‡æ–™åº«åœ¨å“ªè£¡ï¼Ÿ

A: SQLite è³‡æ–™åº«æ–‡ä»¶ä½æ–¼ `backend/data/database.sqlite`ã€‚æ¸¬è©¦ç’°å¢ƒä½¿ç”¨è¨˜æ†¶é«”è³‡æ–™åº«ã€‚

### Q: å¦‚ä½•é‡ç½®è³‡æ–™åº«ï¼Ÿ

A: åˆªé™¤ `backend/data/database.sqlite` æ–‡ä»¶ï¼Œé‡æ–°å•Ÿå‹•å¾Œç«¯æœå‹™å³å¯ã€‚

### Q: å¿˜è¨˜ç®¡ç†å“¡å¯†ç¢¼æ€éº¼è¾¦ï¼Ÿ

A: åˆªé™¤è³‡æ–™åº«æ–‡ä»¶é‡æ–°å•Ÿå‹•ï¼Œæˆ–ç›´æ¥åœ¨è³‡æ–™åº«ä¸­æ›´æ–°å¯†ç¢¼ï¼ˆéœ€è¦ bcrypt åŠ å¯†ï¼‰ã€‚

### Q: æ¸¬è©¦å¤±æ•—æ€éº¼è¾¦ï¼Ÿ

A: 
1. ç¢ºä¿ Node.js ç‰ˆæœ¬ >= 18
2. åˆªé™¤ `node_modules` å’Œ `package-lock.json`ï¼Œé‡æ–°å®‰è£
3. ç¢ºä¿æ²’æœ‰å…¶ä»–æœå‹™ä½”ç”¨ 3000 æˆ– 5173 ç«¯å£

### Q: å‰ç«¯ç„¡æ³•é€£æ¥å¾Œç«¯ï¼Ÿ

A: 
1. ç¢ºèªå¾Œç«¯æœå‹™å·²å•Ÿå‹•åœ¨ `http://localhost:3000`
2. æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°çš„ CORS éŒ¯èª¤
3. ç¢ºèª API è«‹æ±‚è·¯å¾‘æ­£ç¢º

### Q: å¦‚ä½•æ·»åŠ æ–°ç”¨æˆ¶ï¼Ÿ

A: ä½¿ç”¨ç®¡ç†å“¡å¸³è™Ÿç™»å…¥å¾Œï¼Œåœ¨ç”¨æˆ¶ç®¡ç†é é¢é»æ“Šã€ŒNew Userã€æŒ‰éˆ•ã€‚

## é–‹ç™¼æŒ‡å—

### ä»£ç¢¼é¢¨æ ¼

- ä½¿ç”¨ ES6+ èªæ³•
- ä½¿ç”¨ ESLint é€²è¡Œä»£ç¢¼æª¢æŸ¥
- éµå¾ª Airbnb JavaScript Style Guide

### Git å·¥ä½œæµç¨‹

1. å¾ `main` åˆ†æ”¯å‰µå»ºåŠŸèƒ½åˆ†æ”¯
2. å®ŒæˆåŠŸèƒ½é–‹ç™¼ä¸¦é€šéæ¸¬è©¦
3. æäº¤ Pull Request
4. Code Review å¾Œåˆä½µ

### è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

## æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ ISC æˆæ¬Šã€‚

## è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œè«‹æäº¤ Issue æˆ–è¯ç¹«å°ˆæ¡ˆç¶­è­·è€…ã€‚

---

**æœ€å¾Œæ›´æ–°**: 2026-02-15
